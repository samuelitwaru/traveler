<!DOCTYPE html>
<html>
<head>
	<title>Admin</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">

	<link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="/static/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="/static/css/cropper.min.css">
	<link rel="stylesheet" type="text/css" href="/static/css/style.css">
	
	<script type="text/javascript" src="/static/js/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="/static/js/popper.min.js"></script>
	<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/static/js/script.js"></script>
	<!-- <script type="text/javascript" src="/static/js/cropper.min.js"></script> -->
	<script type="text/javascript" src="/static/js/cropper.js"></script>

</head>

<body>
	<div class="container">
		<h2 class="text-center">Transport Companies</h2>
		<hr class="w-25 my-1">
		<div align="center"><button class="btn btn-secondary">Add Company</button></div>
		<hr class="w-25 my-1">
		<div class="d-flex flex-row justify-content-center bd-highlight mb-3 flex-wrap">
			<div class="card m-2" style="width: 18rem;">
				<img src="/static/img/tmp-logo.png" class="card-img-top" alt="...">
				<div class="card-body">
					<h5 class="card-title">Gagga</h5>
					<hr>
					<button class="btn btn-primary btn-block" data-toggle="modal" data-target="#travelStatusModal">Travel Statuses</button>
					<!-- Modal -->
					<div class="modal fade" id="travelStatusModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title">Travel Statuses</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body">
									<div class="border btn-block">
										<div class="card-header p-2 text-center">
											<div class="input-group">
												<input id="bus-status-input" type="text" class="form-control text-center shadow-sm btn-text-center">

												<div class="input-group-append">
													<button id="add-status-btn" class="btn btn-primary">Add</button>
												</div>
											</div>
										</div>
										<ul id="status-list" class="list-group list-group-flush">
										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>
					<hr>
					<div class="btn-group btn-block">
						<button class="btn btn-primary">Journeys</button>
						<button class="btn btn-outline-primary fa fa-plus"></button>		
					</div>
					<hr>
					<div class="btn-group btn-block">
						<button class="btn btn-primary">Buses</button>	
						<button class="btn btn-outline-primary fa fa-plus"></button>		
					</div>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
		var busTypes = ["ORDINARY"];
		

		function loadBusTypes(){
			$('#status-list').html('')
			for (var i=0; i < busTypes.length; i++) {
				$('#status-list').append(
					`<li class="list-group-item text-center">${busTypes[i]}<button class="btn btn-danger float-right badge badge-danger" onclick="removeBusType('${busTypes[i]}')">&times;</button></li>`
		    	)
			}
		}

		function removeBusType(type){
			busTypes = busTypes.filter((each)=>{
				return each !== type
			});
			loadBusTypes()
		}


		$('#add-status-btn').on('click', (event)=>{
			addTravelStatus()
		})


		$("#bus-status-input").on('keypress', (event)=>{
			if (event.keyCode === 13) {
				event.preventDefault();
				addTravelStatus();
			}
		})

		addTravelStatus = function(){
			type = $('#bus-status-input').val().toUpperCase()
			if (!(busTypes.includes(type))){
				busTypes.push(type)
				$('#bus-status-input').val('')
				loadBusTypes();
			}
		}


		loadBusTypes()
	</script>


</body>
</html>